<!DOCTYPE html>
<html lang="ko">

<head>
	<!-- 문서의 메타 정보 및 외부 리소스 링크 -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>디파인더바디 피트니스</title>
	<link rel="stylesheet" href="css/index.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
	<!-- 헤더 영역 (외부 파일에서 로드) -->
	<div id="header"></div>

	<main>
		<!-- 히어로 섹션: 메인 콘텐츠 소개 -->
		<section class="hero-section">
			<div class="hero-content">
				<h1 class="editable" contenteditable="false">건강한 삶을 시작하세요</h1>
				<p class="editable" contenteditable="false">최신 장비와 전문 트레이너가 여러분을 기다리고 있습니다.</p>
				<a href="https://map.naver.com/p/entry/place/1960250523?placePath=%252Fhome%253Fentry%253Dplt&searchType=place&lng=127.0151611&lat=37.6086138&c=15.00,0,0,0,dh"
					class="cta-button editable" contenteditable="false">지금 방문하기</a>
			</div>
		</section>

		<!-- 콘텐츠 섹션: 이벤트 배너 및 기능 카드 -->
		<section class="content-section">
			<!-- 이벤트 배너 슬라이더 -->
			<div class="event-banner">
				<div class="slider">
					<img src="images/event/event-banner1.png" alt="이벤트 배너1" class="event-image editable">
					<img src="images/event/event-banner2.jpg" alt="이벤트 배너2" class="event-image editable">
					<img src="images/event/event-banner3.jpg" alt="이벤트 배너3" class="event-image editable">
					<img src="images/event/event-banner4.jpg" alt="이벤트 배너4" class="event-image editable">
				</div>
			</div>

			<!-- 기능 카드: 각 페이지로 연결되는 링크 -->
			<div class="feature-cards">
				<a href="event.html" class="card">
					<h3 class="editable" contenteditable="false">이벤트</h3>
					<p class="editable" contenteditable="false">디파인더바디만의 <br>다양한 이벤트와 프로모션을 확인하세요</p>
				</a>
				<a href="trainers.html" class="card">
					<h3 class="editable" contenteditable="false">팀원 소개</h3>
					<p class="editable" contenteditable="false">디파인더바디의 <br>스태프들을 만나보세요</p>
				</a>
				<a href="facilities.html" class="card">
					<h3 class="editable" contenteditable="false">시설 소개</h3>
					<p class="editable" contenteditable="false">디파인더바디의 <br>최신 장비와 쾌적한 환경을 경험하세요</p>
				</a>
				<a href="contact.html" class="card">
					<h3 class="editable" contenteditable="false">고객 지원</h3>
					<p class="editable" contenteditable="false">디파인더바디에게 <br>궁금한 점이 있으면 문의해주세요</p>
				</a>
			</div>
		</section>
	</main>

	<!-- 푸터 영역 (외부 파일에서 로드) -->
	<div id="footer"></div>

	<script>
		// 슬라이드 인덱스 초기화
		let slideIndex = 0;
		const slides = document.querySelectorAll('.event-image');

		// 유효한 이미지만 필터링하는 함수
		function filterValidImages() {
			return Array.from(slides).filter(slide => {
				return slide.complete && slide.naturalHeight !== 0;
			});
		}

		// 슬라이드쇼 기능
		function showSlides() {
			const validSlides = filterValidImages();

			if (validSlides.length === 0) return;

			// 모든 슬라이드 숨기기
			validSlides.forEach(slide => {
				slide.style.display = "none";
				slide.classList.remove('active');
			});

			// 다음 슬라이드 표시
			slideIndex++;
			if (slideIndex > validSlides.length) {
				slideIndex = 1;
			}

			validSlides[slideIndex - 1].style.display = "block";
			validSlides[slideIndex - 1].classList.add('active');

			// 7초 후 다음 슬라이드로 전환
			setTimeout(showSlides, 7000);
		}

		// 이미지 로드 오류 처리
		slides.forEach(slide => {
			slide.onerror = function () {
				this.remove(); // 오류 발생 시 해당 이미지 요소를 제거
			};
		});

		// 콘텐츠 편집 가능 상태 변경 함수
		function makeContentEditable(editable) {
			const editableElements = document.querySelectorAll('.editable');
			editableElements.forEach(el => el.contentEditable = editable);
		}

		// DOM 로드 완료 시 실행되는 함수
		document.addEventListener('DOMContentLoaded', function () {
			// 헤더와 푸터 로드
			$("#header").load("header.html", function () {
				if (typeof initializeHeader === 'function') {
					initializeHeader();
				}
			});
			$("#footer").load("footer.html");
		});

		// 이미지 로드 완료 후 슬라이드쇼 시작
		Promise.all(Array.from(slides).map(img => {
			if (img.complete) return Promise.resolve();
			return new Promise(resolve => {
				img.onload = resolve;
				img.onerror = () => {
					img.remove();
					resolve();
				};
			});
		})).then(() => {
			showSlides();
		});
	</script>
</body>

</html>